<!--Autor: Prof. Fabio santos (fssilva@uea.edu.br) -->
<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/3.0.0-rc.5/web3.min.js"></script>
	<script src="./js/index.js"></script>
	<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<link href="https://unpkg.com/cirrus-ui" type="text/css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous" />
	<link
      href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,600,700"
      rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
      rel="stylesheet" />	
		
    <title>Meu Primeiro Jogo NFT</title>
    	
	<style type = "text/css">
	body{
	padding: 0px;
	margin: 0px;
	}
	canvas{
	display:block;
	margin: 0;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	}
	</style>
</head>
<script>

	function status() {
        var msg = ' ';
		Swal.fire({
		title: 'Conectado! Clique em um botão',
		showDenyButton: true,
		showCancelButton: false,
		confirmButtonText: 'Jogar',
		denyButtonText: 'Ranking',
		}).then((result) => {
		  /* Read more about isConfirmed, isDenied below */
		if (result.isConfirmed) {
			window.location.href = "game.html";	   
					
		} 
		else if (result.isDenied) {
		     
			 (async()=>{
			  const result = await getRanking();
			  console.log("tamanho:",result.length);
			  
			  for (var i = 0; i < result.length; i++) {
			  
					msg = msg + 'Hash: '+result[i][0]+' '+'Score: '+result[i][1]+'<br>';
					Swal.fire(msg, '', 'success');
					Swal.fire({
					  title: '<strong>Ranking</strong>',
					  icon: 'info',
					  html:
						'<font size="0.5px">' +
						msg +
						'</font>',
					  showCloseButton: true,
					  showCancelButton: false,
					  focusConfirm: false,
					  confirmButtonText:
						'<i class="fa fa-thumbs-up"></i> Fechar!'
					 
					})


					
			  }
			  
			})();
			 
		}
	  })          
            
    }

    function connect() {
            console.log('Calling connect()')
            ethereum
            .request({ method: 'eth_requestAccounts' })
            .then(status)
            .catch((err) => {
            if (err.code === 4001) {
                // EIP-1193 userRejectedRequest error
                // If this happens, the user rejected the connection request.
                console.log('Please connect to MetaMask.');
               
            }else {
                console.error(err);
            }
            });
    }
		$( document ).ready(function() {
		 $('#enableMetamask').click(function() {
                connect();				
            });
		})

</script>

<body>
		<div style="margin-top: 30px;" class="row text-center">
            <div class="col-md-12">
                <h2>Bem vindo ao Exemplo de Jogo NFT</h2>
				<img src='assets/img6.png'>				
            </div>  
			<br>
			<br>
			 <div class="col-md-12">
                <br>
				<h3>Instruções para jogar:</h6>				
            </div> 
			<div class="col-md-12">
                <h6>1. Conectar no Metamask <button id="enableMetamask" class="btn-success u-no-padding">Conectar ao Metamask</button></h6>
				<h6>2. Selecionar a rede Rospten Testnet</h6>
				<h6>3. Acessar um faucet e solicitar ETHERs para poder jogar</h6>	
				<h6><a href="" onClick="javascript:window.open('https://faucet.dimensions.network/', 'popup') ;return false">Faucet Rospten</a></h6>
            </div> 
			<div class="col-md-12">
               	<h6>Desenvolvedor: Prof. Fabio Santos:</h6>
				<h6><a href="" onClick="javascript:window.open('https://www.youtube.com/channel/UCjmN_ooERzfdF-t3evvJjcQ', 'popup') ;return false">Canal <img width=50, height=50 src='./assets/Youtube.png'>Programação de Jogos NFT</a></h6>	
            </div>
        </div>			
		
</body>
</html>